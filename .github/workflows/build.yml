name: Build

on:
    push:

jobs:
    build:
        name: ${{ matrix.name }}
        runs-on: ${{ matrix.os }}

        strategy:
            fail-fast: false
            matrix:
                include:
                    - name: Linux
                      os: ubuntu-latest
                      platform: linux
                    - name: Windows
                      os: windows-latest
                      platform: win

        steps:
            - name: Checkout Project
              uses: actions/checkout@v6
              with:
                  submodules: "recursive"

            - name: CMake Configure
              run: |
                  mkdir build
                  cmake -S . -B ./build

            - name: Linux Build
              if: matrix.platform == 'linux'
              run: make -C build

            - name: Windows Build
              if: matrix.platform == 'win'
              run: |
                  cd build
                  msbuild snivy.vcxproj

